<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src ="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <meta charget="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="main.css">
    <script src="index.js"></script>
</head>
<body>
  <style>
    b{
      text-align: left;
      color:rgb(0, 0, 0);
    }

    #bg{
      display: grid;
      padding-top: 10px;
    }
  </style>
<div id="bg">
  <div><b type="button" class="navbar-brand" onclick="window.location.href='https://vmart.life'">SEND IT</b></div>

        <div class="container" id="orderform" style="width:fit-content">
  
     <!--ORDER FORM-->

        <form class="row g-3" id="orderforms" action="" method="post"><b>PICKUP ADDRESS</b>
            <div class="col-md-4 form-field">
              <input type="name" id="fromname" class="col-md-4 form-field" autocomplete="off" placeholder="Sender Name"><small></small>
            </div>
            <div class="col-md-4 form-field">
                <input type="number" id="frommobile" class="form-control" autocomplete="off" placeholder="Sender Mobile No"><small></small>
            </div>
            <div class="col-md-4 form-field">
                <input type="number" class="form-control" id="frompincode" readonly><small></small>
              </div>
              <div class="col-md-8 form-field">
                <input type="text" class="form-control" id="fromaddress" placeholder="Pick Up address"><small></small>
              </div>
              <div class="col-md-4 form-field">
                <select id="fromcity" class="form-select"><small></small>
                  <option>Choose...</option>
                  <option>...</option>
                </select>
              </div>
              <b>DELIVER ADDRESS</b>
              <div class="col-md-4 form-field">
                <input type="name" id="tousername" class="form-control" autocomplete="off" placeholder="Receiver Name"><small></small>
              </div>
              <div class="col-md-4 form-field">
                  <input type="number" id="tomobile" class="form-control" autocomplete="off" placeholder="Receiver Mobile No"><small></small>
              </div>
              <div class="col-md-4 form-field">
                  <input type="number" class="form-control" id="topincode" readonly><small></small>
              </div>
              <div class="col-md-8 form-field">
                  <input type="text" class="form-control" id="toaddress" placeholder="Delivery address"><small></small>
              </div>
              <div class="col-md-4 form-field">
                  <select id="tocity" class="form-select"><small></small>
                    <option selected>Choose...</option>
                    <option>...</option>
                  </select>
              </div>
              <b>PACKAGE DETAILS</b>
              <div class="col-md-3 form-field">
                <input type="number" class="form-control" id="weight" placeholder="Weight in Kg`s"><small></small>
              </div>
              <div class="col-md-3 form-field">
              <input type="number" class="form-control" id="height" placeholder="Height in mtrs"><small></small>
              </div>
              <div class="col-md-3 form-field">
                <input type="number" class="form-control" id="width" placeholder="Width in mtrs"><small></small>
              </div>
              <div class="col-md-3 form-field">
                <select id="tocity" class="form-select"><small></small>
                  <option selected>Category</option>
                  <option>Electronics</option>
                  <option>Food</option>
                </select>
            </div>
              <div class="form-field">
                <input type="submit" name="submit" value="Submit" class="next" style="background-color: #2c3e50; color: aliceblue;">
              </div>
              </form>
            </div>        
    </div>
</div>
</div>

<script type="text/javascript">

  //FORM INPUT FROM LOCAL
    
let userdetails = JSON.parse(localStorage.getItem('userdetails'));
    
    console.log(userdetails);
    var username = userdetails.name;
    var mobile = userdetails.mobile;
    var frompincode = userdetails.from;
    var topincode = userdetails.to;
 

    $("#fromname").val(username);
    $("#frommobile").val(mobile);
    $("#frompincode").val(frompincode);
    $("#topincode").val(topincode);
    
//FORM VALIDATIONS 

let orderdetails = {
    "fromname" : "",
    "frommobile" : "",
    "frompincode" : "",
    "fromaddress" : "",
    "toname" : "",
    "tomobile" : "",
    "topincode" : "",
    "toaddress" : "",
    "weight" : "",
    "dimensinons" : "",
    "vtype" : "",
    "instructions" : "",
    "category" : ""
}



const fromname = document.querySelector('#fromname');
const frommobile = document.querySelector('#frommobile');
const fromaddress = document.querySelector('#fromaddress');

const weight = document.querySelector("#weight");
const height = document.querySelector('#height');
const width = document.querySelector('#width');
const category = document.querySelector('#category');
const vtype = document.querySelector('#vtype');
const instructions = document.querySelector('#instruction');

const toname = document.querySelector('#tousername');
const tomobile = document.querySelector('#tomobile');
const toaddress = document.querySelector('#toaddress');

const orderform = document.querySelector("#orderform");


//Checking packform
const checkweight = () => {
  let valid = false;

  const weight1 = weight.value.trim();
  if (!isRequired(weight1)) {
    showError(weight,'Package Weight');
  } else{
    showSuccess(weight);
    valid = true;
  } return valid;
};

const checkheight = () => {
  let valid = false;

  const height1 = height.value.trim();
  if (!isRequired(height1)) {
    showError(height,'Package height');
  } else{
    showSuccess(height);
    valid = true;
  } return valid;
};


// checking from form

const checkfromname = () => {

let valid = false;

const username = fromname.value.trim();

if (!isRequired(username)) {
    showError(fromname, 'Sender name please.');
}else {
    showSuccess(fromname);
    valid = true;
}
return valid;
};



const checkfrommobile = () => {
    let valid = false;
    const mobileno = frommobile.value.trim();
    if (!isRequired(mobileno)) {
        showError(frommobile, 'Sender number please.');
    }  else if (!isMobileValid(mobileno)) {
        showError(frommobile, 'Mobile should be 10 numbers');
    }else {
        showSuccess(frommobile);
        valid = true;
    }
    return valid;
};


const checkfromaddress = () => {
  let valid = false;
  const address = fromaddress.value.trim();
  if(!isRequired(address)){
    showError(fromaddress,'Please fill the pickup address');
  } else{
    showSuccess(fromaddress);
    valid = true;
  }
  return valid;
};


//checking to form..

const checktoname = () => {

let valid = false;

const username = toname.value.trim();

if (!isRequired(username)) {
    showError(toname, 'Receiver name please.');
}else {
    showSuccess(toname);
    valid = true;
}
return valid;
};



const checktomobile = () => {
    let valid = false;
    const mobileno = tomobile.value.trim();
    if (!isRequired(mobileno)) {
        showError(tomobile, 'Receivers number please.');
    }  else if (!isMobileValid(mobileno)) {
        showError(tomobile, 'Mobile should be 10 numbers');
    }else {
        showSuccess(tomobile);
        valid = true;
    }
    return valid;
};


const checktoaddress = () => {
  let valid = false;
  const address = toaddress.value.trim();
  if(!isRequired(address)){
    showError(toaddress,'Please fill the delivery address');
  } else{
    showSuccess(toaddress);
    valid = true;
  }
  return valid;
};


const isRequired = value => value === '' ? false : true;

const isMobileValid = (mobile) => {
    const re = new RegExp("(?=.{10,})");
    return re.test(mobile);
};

const showError = (input, message) => {
    // get the form-field element
    const formField = input.parentNode;
    console.log(formField);
    // add the error class
    formField.classList.remove('success');
    formField.classList.add('error');

    // show the error message
    const error = formField.querySelector('small');
    error.textContent = message;
};

const showSuccess = (input) => {
    // get the form-field element
    const formField = input.parentElement;
    console.log(formField)

    // remove the error class
    formField.classList.remove('error');
    formField.classList.add('success');

    // hide the error message
    const error = formField.querySelector('small');
    error.textContent = '';
}

if(orderform){
orderform.addEventListener('submit', function (e) {
    // prevent the form from submitt ing
    e.preventDefault();


    let isfromnamevalid = checkfromname(),
        isfrommobilevalid = checkfrommobile(),
        isfromaddressvalid = checkfromaddress (),
        istonamevalid = checktoname(),
        istomobilevalid = checktomobile(),
        istoaddressvalid = checktoaddress(),
        isheigthvalid = checkheight();
        isweightvalid = checkweight();


    let isformvalid = isfromnamevalid && isfrommobilevalid && isfromaddressvalid && istonamevalid && istoaddressvalid && istomobilevalid && isweightvalid && isheigthvalid;

    if(isformvalid){
        
        orderdetails.fromname = fromname.value;
        orderdetails.frommobile = frommobile.value;
        orderdetails.fromaddress = fromaddress.value;
        orderdetails.frompincode = frompincode;
        orderdetails.toname = toname.value;
        orderdetails.tomobile = tomobile.value;
        orderdetails.toaddress = toaddress.value;
        orderdetails.topincode = topincode;

        console.log(orderdetails);
        localStorage.setItem('orderdetails',JSON.stringify(orderdetails));
         
      }
    })
  }
 


</script>



<div id="footer">
  <div class="py-3 my-4" style="padding: 10px;">
    <p><h3><b>SENDIT</b></h3></p>
    <p>Send it provides the best logistic services from your location to each and every state in India</p>
  </div>
  <div class="py-3 my-4" style=" padding:20px; margin:auto"><form id="contactform" action="sample.js" onsubmit="validateform()" method="post">
    <div class="form-field"><h6>CONTACT US</h6></div>
    <div class="form-field"><input type="text" name="Email" id="email" class="form-field" placeholder="Email ID"><small></small></div>
    <div class="form-field"><input type="submit" name="submit" onclick="validateform()" name="Submit" style="background-color:rgb(0, 0, 0); color: white;"></button></div></form>
  </div>
</div>


  <footer class="py-3 my-4" style="padding:10px;">
    <ul class="nav">
      <li class="nav-item footer"><a href="#" class="nav-footer">Home</a></li>
      <li class="nav-item footer"><a href="#" class="nav-footer">Features</a></li>
      <li class="nav-item footer"><a href="#" class="nav-footer">Pricing</a></li>
      <li class="nav-item footer"><a href="#" class="nav-footer">FAQs</a></li>
      <li class="nav-item footer"><a href="#" class="nav-footer">About</a></li>
    </ul>
  </footer>

<p>Â© 2021 Company, Inc</p>

</body>
</html>